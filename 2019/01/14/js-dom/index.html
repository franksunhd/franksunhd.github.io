<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/franksunhd.github.io/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/franksunhd.github.io/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/franksunhd.github.io/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/franksunhd.github.io/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/franksunhd.github.io/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/franksunhd.github.io/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/franksunhd.github.io/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="javascript,">










<meta name="description" content="DOM 对象/节点 DOM(文档对象模型)是指针对HTML和XML文档的一个API(应用程序编程接口).DOM脱胎于网景公司和微软创始的DHTML(动态HTML).">
<meta name="keywords" content="javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="DOM对象&#x2F;节点&#x2F;client&#x2F;offset&#x2F;scroll&#x2F;瀑布流布局&#x2F;图片预加载&#x2F;图片懒加载">
<meta property="og:url" content="https://franksunhd.github.io/franksunhd.github.io/2019/01/14/js-dom/index.html">
<meta property="og:site_name" content="孙思研的个人博客">
<meta property="og:description" content="DOM 对象/节点 DOM(文档对象模型)是指针对HTML和XML文档的一个API(应用程序编程接口).DOM脱胎于网景公司和微软创始的DHTML(动态HTML).">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://franksunhd.github.io/franksunhd.github.io/images/Node.png">
<meta property="og:image" content="https://franksunhd.github.io/franksunhd.github.io/images/offset.png">
<meta property="og:image" content="https://franksunhd.github.io/franksunhd.github.io/images/scroll.png">
<meta property="og:updated_time" content="2019-01-12T13:01:55.964Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DOM对象&#x2F;节点&#x2F;client&#x2F;offset&#x2F;scroll&#x2F;瀑布流布局&#x2F;图片预加载&#x2F;图片懒加载">
<meta name="twitter:description" content="DOM 对象/节点 DOM(文档对象模型)是指针对HTML和XML文档的一个API(应用程序编程接口).DOM脱胎于网景公司和微软创始的DHTML(动态HTML).">
<meta name="twitter:image" content="https://franksunhd.github.io/franksunhd.github.io/images/Node.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/franksunhd.github.io/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://franksunhd.github.io/franksunhd.github.io/2019/01/14/js-dom/">





  <title>DOM对象/节点/client/offset/scroll/瀑布流布局/图片预加载/图片懒加载 | 孙思研的个人博客</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/franksunhd.github.io/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">孙思研的个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/franksunhd.github.io/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/franksunhd.github.io/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/franksunhd.github.io/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/franksunhd.github.io/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://franksunhd.github.io/franksunhd.github.io/franksunhd.github.io/2019/01/14/js-dom/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="franksun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/franksunhd.github.io/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="孙思研的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">DOM对象/节点/client/offset/scroll/瀑布流布局/图片预加载/图片懒加载</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-14T20:58:10+08:00">
                2019-01-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/franksunhd.github.io/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          
          
            <div class="post-tags">
              
                <a href="/franksunhd.github.io/tags/javascript/" style="border-bottom:none;" rel="tag" class="fa fa-tag">  javascript</a>
              
            </div>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="DOM-对象-节点"><a href="#DOM-对象-节点" class="headerlink" title="DOM 对象/节点"></a>DOM 对象/节点</h2><ul>
<li>DOM(文档对象模型)是指针对HTML和XML文档的一个API(应用程序编程接口).DOM脱胎于网景公司和微软创始的DHTML(动态HTML).<a id="more"></a>
</li>
</ul>
<h3 id="文档对象模型"><a href="#文档对象模型" class="headerlink" title="文档对象模型"></a>文档对象模型</h3><p><img src="/franksunhd.github.io/images/Node.png" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DOM:文档对象模型</span></span><br><span class="line"><span class="comment">// document: 文档对象</span></span><br><span class="line"><span class="comment">// DOM 属性结构: document -&gt; html-&gt; 各节点组成</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 常用的节点:</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1.元素节点 &lt;div&gt;&lt;/div&gt; 	nodeType=1</span></span><br><span class="line"><span class="comment">    2.属性节点  id  class 	nodeType=2</span></span><br><span class="line"><span class="comment">    3.文本节点				nodeType=3</span></span><br><span class="line"><span class="comment">    4.注释节点				nodeType=8</span></span><br><span class="line"><span class="comment">    5.根节点 document 		 document.nodeType=9</span></span><br><span class="line"><span class="comment">    6.&lt;!DOCTYPE html&gt;       document.doctype.nodeType=10</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// nodeName 标签名</span></span><br><span class="line"><span class="comment">// nodeType 节点类型</span></span><br><span class="line"><span class="comment">// nodeValue 节点值</span></span><br><span class="line"><span class="comment">// 每个节点都具有这三个属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.document</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>,<span class="built_in">document</span>.nodeName,<span class="built_in">document</span>.nodeType,<span class="built_in">document</span>.nodeValue);</span><br><span class="line"><span class="comment">// 文档对象 "#document" 9 null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.documentElement html对象</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.documentElement,<span class="built_in">document</span>.documentElement.nodeName,<span class="built_in">document</span>.documentElement.nodeType,<span class="built_in">document</span>.documentElement.nodeValue);</span><br><span class="line"><span class="comment">// "HTML" 1 null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.html);  <span class="comment">// undefined 未定义,不这么写</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.head</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.head,<span class="built_in">document</span>.head.nodeName,<span class="built_in">document</span>.head.nodeType,<span class="built_in">document</span>.head.nodeValue);</span><br><span class="line"><span class="comment">// head 对象 "HEAD" 1 null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.body</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.body,<span class="built_in">document</span>.body.nodeName,<span class="built_in">document</span>.body.nodeType,<span class="built_in">document</span>.body.nodeValue);</span><br><span class="line"><span class="comment">// body 对象 "BODY" 1 null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">'box'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(box,box.nodeName,box.nodeType,box.nodeValue);</span><br><span class="line"><span class="comment">// DIV 1 null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.node.childNodes 元素所有子节点</span></span><br><span class="line"><span class="built_in">console</span>.log(box.childNodes);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6.Node.parentNode 获取节点的父节点</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.body.parentNode);		<span class="comment">// html 对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// document 对象 是这个文档的根节点吗,没有父节点,输出为空</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.parentNode);  <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nodeT = box.childNodes[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// #text 代表文本节点  3代表节点类型为文本节点</span></span><br><span class="line"><span class="built_in">console</span>.log(nodeT.nodeName,nodeT.nodeType,nodeT.nodeValue);</span><br><span class="line"><span class="comment">// #text 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nodeC = box.childNodes[<span class="number">1</span>];</span><br><span class="line"><span class="built_in">console</span>.log(nodeC.nodeName,nodeC.nodeType,nodeC.nodeValue);</span><br><span class="line"><span class="comment">// #comment 8 注释1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 根节点: document</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.nodeName,<span class="built_in">document</span>.nodeType,<span class="built_in">document</span>.nodeValue);  <span class="comment">// #document 9 null</span></span><br><span class="line"><span class="comment">// #document 9 null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;!DOCTYPE html&gt; 声明节点</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.doctype.nodeName,<span class="built_in">document</span>.doctype.nodeType,<span class="built_in">document</span>.doctype.nodeValue);  <span class="comment">// html 10 null</span></span><br><span class="line"><span class="comment">// html 10 null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 7.属性节点</span></span><br><span class="line"><span class="comment">// attributes 获取所有的属性节点</span></span><br><span class="line"><span class="built_in">console</span>.log(box.attributes);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(box.attributes[<span class="number">0</span>].nodeName);  <span class="comment">// id</span></span><br><span class="line"><span class="built_in">console</span>.log(box.attributes[<span class="number">0</span>].nodeType);  <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<h3 id="获取样式"><a href="#获取样式" class="headerlink" title="获取样式"></a>获取样式</h3><ul>
<li>(style/getComputedStyle/currentStyle)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	getAttribute 和 style 的区别</span></span><br><span class="line"><span class="comment">	1).getAttribute 是获取元素的属性, style是获取元素的 style中的行间样式</span></span><br><span class="line"><span class="comment">	2).getAttribute 可以获取元素的自定义属性,比如name,age等</span></span><br><span class="line"><span class="comment">	3).style 是获取的 style 中的 width,height 等属性.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.node.style 的方式只能够获取 元素的行间样式</span></span><br><span class="line"><span class="built_in">console</span>.log(box.style.height,<span class="keyword">typeof</span>(box.style.height));</span><br><span class="line"><span class="comment">// 300px string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.标准浏览器中的方法: getComputedStyle(元素对象,参数2)</span></span><br><span class="line"><span class="comment">//  返回该元素对象的所有样式</span></span><br><span class="line"><span class="comment">//  可以获取到  行间样式 ,也可以获取到  嵌套样式</span></span><br><span class="line"><span class="comment">//  参数2:伪类/伪元素的名字,一般省略或者给null</span></span><br><span class="line"><span class="comment">//  IE8 以下的浏览器  currentStyle</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">window</span>.getComputedStyle(box,<span class="literal">null</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a.height);  <span class="comment">// 300px</span></span><br><span class="line"><span class="built_in">console</span>.log(a.backgroundColor);  <span class="comment">// rgb(0,0,255)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">window</span>.getComputedStyle(box,<span class="string">":before"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(b,<span class="keyword">typeof</span> b);  <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(b.content);	<span class="comment">// 通过参数2获取</span></span><br><span class="line"><span class="built_in">console</span>.log(b.height);  <span class="comment">// 100px</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">ele,attr</span>) </span>&#123;</span><br><span class="line"><span class="comment">// 兼容性写法</span></span><br><span class="line"><span class="keyword">return</span> ele.currentStyle ? ele.currentStyle[attr]: getComputedStyle(ele)[attr];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 判断浏览器有没有这个方法,前边加 window 且不能省略</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">window</span>.getComputedStyle ? getComputedStyle(ele)[attr] : ele.currentStyle[attr];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="节点访问-父-兄-子"><a href="#节点访问-父-兄-子" class="headerlink" title="节点访问(父/兄/子)"></a>节点访问(父/兄/子)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.获得父节点 标准写法,找到父节点</span></span><br><span class="line"><span class="built_in">document</span>.parentNode  <span class="comment">// 输出为空 document对象是根节点,没有父节点</span></span><br><span class="line"><span class="comment">// parentElement 不是标准写法</span></span><br><span class="line">baby.parentElement.style.border = <span class="string">"5px solid red"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.兄弟节点</span></span><br><span class="line">one.nextSibling  <span class="comment">// 将文本节点也识别为兄弟</span></span><br><span class="line">one.nextElementSibling  <span class="comment">// 只识别标签作为自己的兄弟</span></span><br><span class="line"></span><br><span class="line">one.previousSibling  <span class="comment">// 访问元素的上一个节点,包括文本节点</span></span><br><span class="line">one.previousElementSlibing  <span class="comment">// 访问元素的上一个元素节点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.firstChild 选择的是第一个子节点,其中可包括文本节点</span></span><br><span class="line"><span class="comment">// 所有浏览器都支持,标准浏览器下返回第一个节点(可以是文本节点或者注释节点)</span></span><br><span class="line"><span class="comment">// IE 6,7,8下返回第一个 元素节点(不包括文本节点等)</span></span><br><span class="line"><span class="built_in">console</span>.log(box.firstChild);  <span class="comment">// 文本节点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.firstElementChild() 选择第一个元素子节点</span></span><br><span class="line"><span class="comment">// 只有标准浏览器支持, IE 下的为 undefined</span></span><br><span class="line"><span class="comment">// 返回的是第一个 元素节点</span></span><br><span class="line">box.firstElementChild.style.fontSize = <span class="string">"30px"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(box.firstElementChild);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取第一个子元素的兼容写法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">firstEle</span>(<span class="params">ele</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ele.firstElementChild || ele.firstChild;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">one.lastChild  <span class="comment">// 访问元素的最后一个子节点,包括文本节点</span></span><br><span class="line">one.lastElementChild  <span class="comment">// 访问元素的最后一个 子元素节点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// last:特点同上</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lastEle</span>(<span class="params">ele</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ele.lastElementChild || ele.lastChild;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.直接子元素集合</span></span><br><span class="line"><span class="comment">// children属性,获取所有的子代元素</span></span><br><span class="line"><span class="comment">// 不是标准写法,但是所有浏览器都支持</span></span><br><span class="line"><span class="built_in">console</span>.log(box.children);</span><br><span class="line"></span><br><span class="line">one.children[<span class="number">2</span>]  <span class="comment">// 不包含文本节点</span></span><br><span class="line">one.children[<span class="number">4</span>]</span><br></pre></td></tr></table></figure>
<h3 id="获得节点"><a href="#获得节点" class="headerlink" title="获得节点"></a>获得节点</h3><ul>
<li>(ID/ClassName/TagName/querySelector)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"id"</span>);</span><br><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">"div"</span>);</span><br><span class="line"><span class="built_in">document</span>.getElementsByClassName(<span class="string">"test"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// JS 新增的选择器,只有标准浏览器支持</span></span><br><span class="line"><span class="comment">// 1. querySelector()</span></span><br><span class="line"><span class="comment">// 参数 : 选择器</span></span><br><span class="line"><span class="comment">// 返回 : 元素,及时有多个元素也只是返回第一个元素</span></span><br><span class="line"><span class="keyword">var</span> box1 = <span class="built_in">document</span>.querySelector(<span class="string">"div#box"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(box1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. querySelectorAll() 返回的是一个集合</span></span><br><span class="line"><span class="comment">// 参数 : 选择器</span></span><br><span class="line"><span class="comment">// 返回 : 元素集合  [元素对象]</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">document</span>.querySelectorAll(<span class="string">"#box &gt; p"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(p1);</span><br><span class="line">p1[<span class="number">0</span>].style.fontSize = <span class="string">"30px"</span>;</span><br></pre></td></tr></table></figure>
<h3 id="创建节点"><a href="#创建节点" class="headerlink" title="创建节点"></a>创建节点</h3><ul>
<li>(createElement/createTextNode/createComment)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.创建元素节点</span></span><br><span class="line"><span class="keyword">var</span> test = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line"><span class="comment">// 2.创建文本节点</span></span><br><span class="line"><span class="keyword">var</span> textNode = <span class="built_in">document</span>.createTextNode(<span class="string">"百度一下,你就知道!"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(textNode, <span class="keyword">typeof</span>(textNode));  <span class="comment">// 文本  "Object"</span></span><br><span class="line"><span class="comment">// 3.创建节点注释</span></span><br><span class="line"><span class="keyword">var</span> com = <span class="built_in">document</span>.createComment(<span class="string">"这是注释"</span>);</span><br><span class="line"><span class="comment">// 调用两次,只有后边的设置有效</span></span><br><span class="line">ele.appendChild(com);</span><br><span class="line">box.appendChild(com);</span><br></pre></td></tr></table></figure>
<h3 id="操作节点"><a href="#操作节点" class="headerlink" title="操作节点"></a>操作节点</h3><ul>
<li>(appendChild/insertBefore/replaceChild/removeChild)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 插入操作</span></span><br><span class="line"><span class="comment">// 1. 把元素绘制到 dom 中</span></span><br><span class="line">box.appendChild(ele);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sEle = <span class="built_in">document</span>.createElement(<span class="string">"strong"</span>);</span><br><span class="line"><span class="keyword">var</span> sEle1 = <span class="built_in">document</span>.createElement(<span class="string">"strong"</span>);</span><br><span class="line">sEle.innerText = <span class="string">"strong标签"</span>;</span><br><span class="line">sEle1.innerText = <span class="string">"strong标签"</span>;</span><br><span class="line">box.appendChild(sEle);</span><br><span class="line">box.appendChild(sEle1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. box.insertBefore()</span></span><br><span class="line"><span class="comment">// 参数1:新元素</span></span><br><span class="line"><span class="comment">// 参数2:参照元素</span></span><br><span class="line"><span class="keyword">var</span> Img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span><br><span class="line">Img.src = <span class="string">"./img/favicon.ico"</span>;</span><br><span class="line">Img.style.width = <span class="string">"30px"</span>;</span><br><span class="line">box.insertBefore(Img,sEle);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. replaceChild(新元素,旧元素);</span></span><br><span class="line"><span class="comment">// 参数1:新元素</span></span><br><span class="line"><span class="comment">// 参数2:参照元素,要替换的旧元素</span></span><br><span class="line">box.replaceChild(Img,sEle1);</span><br><span class="line"><span class="comment">//替换节点(被替换的节点还在文档中,但是在文档中已经没有了自己的位置)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.删除子元素</span></span><br><span class="line">box.removeChild(Img);</span><br><span class="line"><span class="comment">//移除节点(要移除的节点还在文档中,但是在文档中已经没有了自己的位置)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.remove() 删除全部元素</span></span><br><span class="line">box.remove();</span><br></pre></td></tr></table></figure>
<h3 id="节点属性相关"><a href="#节点属性相关" class="headerlink" title="节点属性相关"></a>节点属性相关</h3><ul>
<li>(操作属性的方式/getAttribute/setAttribute)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 操作属性的方式:</span></span><br><span class="line"><span class="comment"> * 		元素对象自定义的属性,和行间自定义属性没有关联,不能渲染到文档</span></span><br><span class="line"><span class="comment"> * 1.点语法 可以获取或者设置行间系统的属性</span></span><br><span class="line"><span class="comment"> * 2.元素对象[""]  可以放置变量,不能去引号,去掉引号被认为是变量</span></span><br><span class="line"><span class="comment"> * 3.getAttribute() 获取文档中系统或者自定义的属性</span></span><br><span class="line"><span class="comment"> * 4.setAttribute() 设置文档中系统或者自定义属性都可以加载到文档中</span></span><br><span class="line"><span class="comment"> * 5.hasAttribute("") 判断元素有没有当前的属性</span></span><br><span class="line"><span class="comment"> * 6.hasAttributes() 判断元素有没有设置属性</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">&lt;div id=<span class="string">"box"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"BoxName"</span> name=<span class="string">"NameBox"</span> age=<span class="string">"123"</span> style=<span class="string">"background-color:red;"</span>&gt;</span><br><span class="line">    &lt;!-- 注释<span class="number">1</span> --&gt;<span class="xml"><span class="comment">&lt;!-- 注释2 --&gt;</span></span></span><br><span class="line"><span class="xml">    文本节点</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>p标签<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">'box'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(box);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 点语法</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"------点语法------"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(box.id,box.className);</span><br><span class="line">box.name = <span class="string">"box1"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(box.id,box.name);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点语法无法获得自定义的属性</span></span><br><span class="line"><span class="built_in">console</span>.log(box.age);  <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ?!重点难理解!?</span></span><br><span class="line"><span class="comment">// 元素对象自定义的属性,和行间自定义属性没有关联,不能渲染到文档</span></span><br><span class="line">box.age = <span class="string">"20"</span>;</span><br><span class="line">box.sex = <span class="string">"男"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(box.age);  <span class="comment">// 20 能打印不能喧染到文档</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"------元素对象[]------"</span>);</span><br><span class="line"><span class="comment">// 2.元素对象[] 不能去引号,去掉引号被认为是变量</span></span><br><span class="line"><span class="built_in">console</span>.log(box[<span class="string">"id"</span>]);  <span class="comment">// box</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"------getAttribute() 获取属性值------"</span>);</span><br><span class="line"><span class="comment">// 3.获取属性值</span></span><br><span class="line"><span class="built_in">console</span>.log(box.getAttribute(<span class="string">"age"</span>));   <span class="comment">// (自定义属性) 123</span></span><br><span class="line"><span class="built_in">console</span>.log(box.getAttribute(<span class="string">"style"</span>));   <span class="comment">// (系统属性) background-color:red;</span></span><br><span class="line"><span class="built_in">console</span>.log(box.getAttribute(<span class="string">"sex"</span>));   <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取 class 标准浏览器使用 class  IE 6,7,8 使用 className</span></span><br><span class="line"><span class="built_in">console</span>.log(box.getAttribute(<span class="string">"class"</span>));   <span class="comment">// Boxname</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.设置: 系统或者自定义的属性都可以被加载到文档中</span></span><br><span class="line">box.setAttribute(<span class="string">"sex"</span>,<span class="string">"男"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.获取元素的所有属性节点</span></span><br><span class="line"><span class="built_in">console</span>.log(box.attributes);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6.判断有没有 某个属性 有返回 true</span></span><br><span class="line"><span class="built_in">console</span>.log(box.hasAttribute(<span class="string">"age"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7.判断元素有没有设置属性 设置返回 true</span></span><br><span class="line"><span class="built_in">console</span>.log(box.hasAttributes());</span><br></pre></td></tr></table></figure>
<h3 id="克隆节点"><a href="#克隆节点" class="headerlink" title="克隆节点"></a>克隆节点</h3><ul>
<li>(cloneNode)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">document</span>.getElementById(“id”);</span><br><span class="line">vaar clone = a.cloneNode(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 只能克隆元素,无法克隆事件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">创建副本节点</span></span><br><span class="line"><span class="comment">  &#123;</span></span><br><span class="line"><span class="comment">  true 深复制,复制节点及其整个子节点树</span></span><br><span class="line"><span class="comment">  flase 浅复制,只复制节点本身</span></span><br><span class="line"><span class="comment">  不复制添加到DOM节点中的js属性</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="处理文本节点"><a href="#处理文本节点" class="headerlink" title="处理文本节点"></a>处理文本节点</h3><ul>
<li>(normalize)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">normalize() <span class="comment">//处理文档树中的文本节点</span></span><br><span class="line"><span class="comment">// 调用该方法:后代节点遇到 空文本节点,就删除;遇到多个相邻的文本节点合并为一个文本节点.</span></span><br></pre></td></tr></table></figure>
<h3 id="innerHTML遗留问题-效率问题"><a href="#innerHTML遗留问题-效率问题" class="headerlink" title="innerHTML遗留问题/效率问题"></a>innerHTML遗留问题/效率问题</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// innerHTML赋值,会覆盖掉 box 中子元素绑定的事件, box中的布局会被重新绘制</span></span><br><span class="line">&lt;div id=<span class="string">"box"</span>&gt;</span><br><span class="line">	&lt;p&gt;文本&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">	&lt;button&gt;按钮&lt;/</span>button&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;hr&gt;</span></span><br><span class="line"><span class="regexp">&lt;p&gt;</span></span><br><span class="line"><span class="regexp">	&lt;button id="bCreate"&gt;开始创建1&lt;/</span>button&gt;</span><br><span class="line">&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;script type="text/</span>javascript<span class="string">"&gt;</span></span><br><span class="line">  var box = document.querySelector("#box");</span><br><span class="line">  <span class="keyword">var</span> bCreate = <span class="built_in">document</span>.querySelector(<span class="string">"#bCreate"</span>);</span><br><span class="line">  <span class="keyword">var</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">"#box button"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> pEle = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span><br><span class="line">  <span class="keyword">var</span> textNode = <span class="built_in">document</span>.createTextNode(<span class="string">"百度一下,你就知道!"</span>);</span><br><span class="line"></span><br><span class="line">  pEle.appendChild(textNode);</span><br><span class="line"></span><br><span class="line">  btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      alert(<span class="string">"box内按钮"</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  bCreate.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// innerHTML赋值,会覆盖掉 box 中子元素绑定的事件, box中的布局会被重新绘制</span></span><br><span class="line">      box.innerHTML += <span class="string">"&lt;p&gt;新的元素&lt;/p&gt;"</span>;</span><br><span class="line">      <span class="comment">// 如果单独的 appendChild 点击按钮是只添加一次</span></span><br><span class="line">      <span class="comment">// 加上 innerHTML 相当于每次都会重新绘制元素在界面的显示, appendChild就是每次都追加</span></span><br><span class="line">      box.appendChild(pEle);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"box"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">    <span class="built_in">console</span>.time(<span class="string">"浪哥"</span>)</span><br><span class="line">    <span class="keyword">var</span> content = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">900</span>; i++) &#123;</span><br><span class="line">        <span class="comment">// 创建 cell</span></span><br><span class="line">        <span class="comment">// appendChild  2-3ms</span></span><br><span class="line">        <span class="comment">// var cell = document.createElement("div");</span></span><br><span class="line">        <span class="comment">// cell.className = "cell";</span></span><br><span class="line">        <span class="comment">// box.appendChild(cell);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 错误 : innerHTML  500-900ms</span></span><br><span class="line">        <span class="comment">// box.innerHTML += "&lt;div class='cell'&gt;&lt;/div&gt;";</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 解决:文档碎片 1ms-3ms</span></span><br><span class="line">        content += <span class="string">"&lt;div class='cell'&gt;&lt;/div&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    box.innerHTML = content;</span><br><span class="line">    <span class="built_in">console</span>.timeEnd(<span class="string">"浪哥"</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="client"><a href="#client" class="headerlink" title="client"></a>client</h2><ul>
<li>元素内部尺寸/浏览器可视区域尺寸</li>
<li>clientWidth/clientHeight 是指元素的内尺寸</li>
<li>返回值是 number类型</li>
<li>包含内容区和 padding 区,不包含边框</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// content + padding</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"内尺寸:宽度"</span>,box.clientWidth,<span class="string">"高度:"</span>,box.clientHeight);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 左边框尺寸和上边框尺寸</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"边框尺寸:左边框"</span>,box.clientLeft,<span class="string">"上边框:"</span>,box.clientTop);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取浏览器可视窗口的宽和高</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"浏览器可视区域宽度:"</span>,<span class="built_in">document</span>.documentElement.clientWidth,<span class="string">"高度:"</span>,<span class="built_in">document</span>.documentElement.clientHeight);</span><br><span class="line"></span><br><span class="line"><span class="comment">// IE6,7,8不支持</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"浏览器可视区域宽度:"</span>,<span class="built_in">window</span>.innerWidth,<span class="string">"高度:"</span>,<span class="built_in">window</span>.innerHeight);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数封装</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clientHeight</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clientWidth</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">window</span>.innerWidth || <span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="offset-元素外尺寸"><a href="#offset-元素外尺寸" class="headerlink" title="offset 元素外尺寸"></a>offset 元素外尺寸</h2><ul>
<li>元素的可见大小由其高度、宽度决定,包括所有内边距、滚动条和边框大小(注意,不包括外边距)。通过<br>下列 5 个属性可以取得元素的偏移量:<ol>
<li>offsetHeight: 获得元素高度　＝　height + border + padding</li>
<li>offsetWidth : 获得元素宽度　 ＝ widht + border + padding</li>
<li>offsetLeft: 获得元素左外边框距离包含该元素的左内边框的距离(经过定位)</li>
<li>offsetTop: 获得元素上外边框距离包含该元素的上内边框的距离(经过定位)</li>
<li>offsetParent: 获得包含该元素的元素(定位)</li>
</ol>
</li>
</ul>
<p><img src="/franksunhd.github.io/images/offset.png" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"f"</span>&gt;</span><br><span class="line">      &lt;div id=<span class="string">"box"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    &lt;script src="./</span>js/jquery.min.js<span class="string">" charset="</span>utf<span class="number">-8</span><span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">    &lt;script type="</span>text/javascript<span class="string">"&gt;</span></span><br><span class="line"><span class="string">      console.log($(document).width());</span></span><br><span class="line"><span class="string">      console.log($(window).width());</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      console.log("</span>---------jQuery 方法---------<span class="string">");</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      // 获得内容的 width</span></span><br><span class="line"><span class="string">      console.log("</span>width = <span class="string">", $('#box').width()); // 200</span></span><br><span class="line"><span class="string">      // 获得 width + padding</span></span><br><span class="line"><span class="string">      console.log("</span>innerWidth = <span class="string">", $('#box').innerWidth()); // 240</span></span><br><span class="line"><span class="string">      // 获得 width + padding + border</span></span><br><span class="line"><span class="string">      console.log("</span>outerWidth = <span class="string">", $('#box').outerWidth()); // 260</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      console.log("</span>---------原生JS 方法---------<span class="string">");</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      var box = document.getElementById('box');</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      // 获得内容的 width</span></span><br><span class="line"><span class="string">      var styles = window.getComputedStyle(box);</span></span><br><span class="line"><span class="string">      console.log("</span>width = <span class="string">", parseInt(styles.width));  // 200</span></span><br><span class="line"><span class="string">      console.log("</span>border = <span class="string">",styles.border);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      // 获得 width + padding</span></span><br><span class="line"><span class="string">      console.log("</span>clientWidth = <span class="string">", box.clientWidth);  // 240 只读属性</span></span><br><span class="line"><span class="string">      // 获得 width + padding + border</span></span><br><span class="line"><span class="string">      console.log("</span>offsetWidth = <span class="string">", box.offsetWidth); // 260  只读属性</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      console.log("</span>---------位置有关系---------<span class="string">");</span></span><br><span class="line"><span class="string">      //一个元素和最近的设置过定位(不是static)的祖先元素之间的距离</span></span><br><span class="line"><span class="string">      // offsetLeft, offsetTop 只读</span></span><br><span class="line"><span class="string">      console.log("</span>box.offsetLeft = <span class="string">",box.offsetLeft);  // 0</span></span><br><span class="line"><span class="string">      console.log("</span>box.offsetTop = <span class="string">",box.offsetTop);  // 0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      box.style.left = "</span><span class="number">100</span>px<span class="string">";</span></span><br><span class="line"><span class="string">      box.style.top = "</span><span class="number">50</span>px<span class="string">";</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      console.log("</span>box.offsetLeft = <span class="string">",box.offsetLeft); // 100</span></span><br><span class="line"><span class="string">      console.log("</span>box.offsetTop = <span class="string">",box.offsetTop);  // 50</span></span><br><span class="line"><span class="string">    &lt;/script&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="offsetWidth-offsetHeight"><a href="#offsetWidth-offsetHeight" class="headerlink" title="offsetWidth/offsetHeight"></a>offsetWidth/offsetHeight</h3><ul>
<li>offserWidth/offsetHeight : 元素外尺寸</li>
<li>返回值是 number 类型</li>
<li>和 client 相比,包含了边框</li>
<li>内容区, padding 区, border 区</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// content + padding + border</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"外尺寸:宽度"</span>,box.offsetWidth,<span class="string">"高度:"</span>,box.offsetHeight);</span><br></pre></td></tr></table></figure>
<h3 id="offsetParent-偏移父元素"><a href="#offsetParent-偏移父元素" class="headerlink" title="offsetParent 偏移父元素"></a>offsetParent 偏移父元素</h3><ul>
<li>和定位配合使用.父元素添加相对定位,子元素偏移就会相对于父元素</li>
<li>如果不加定位,默认会相对于 body 进行偏移</li>
<li>body 的偏移父元素为 null</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(box.offsetParent);  <span class="comment">// wrap</span></span><br><span class="line"><span class="built_in">console</span>.log(box.offsetParent.offsetParent);  <span class="comment">// body</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// body的 offsetParent 是 null</span></span><br><span class="line"><span class="built_in">console</span>.log(box.offsetParent.offsetParent.offsetParent);  <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 到它的 offsetParent的内边距的 左边距离和上边距离</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"元素左边距"</span>,box.offsetLeft,<span class="string">"上边距"</span>,box.offsetTop);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回元素到页面顶部的距离</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOffsetTop</span>(<span class="params">ele</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ele.nodeName == <span class="string">"BODY"</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> top = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        top += ele.offsetTop + ele.offsetParent.clientTop;</span><br><span class="line">        ele = ele.offsetParent;</span><br><span class="line">        <span class="comment">// 如果是 body 停止</span></span><br><span class="line">        <span class="keyword">if</span> (ele.offsetParent == <span class="literal">null</span>)<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> top</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> topValue = getOffsetTop(link);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"topValue:"</span>,topValue);</span><br></pre></td></tr></table></figure>
<h3 id="offset-动画"><a href="#offset-动画" class="headerlink" title="offset 动画"></a>offset 动画</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;offset动画&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">    &lt;style media="screen"&gt;</span></span><br><span class="line"><span class="regexp">    * &#123;</span></span><br><span class="line"><span class="regexp">      margin: 0;</span></span><br><span class="line"><span class="regexp">      padding: 0;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    .ctrl button &#123;</span></span><br><span class="line"><span class="regexp">      width: 100px;</span></span><br><span class="line"><span class="regexp">      height: 80px;</span></span><br><span class="line"><span class="regexp">      text-align: center;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    #box &#123;</span></span><br><span class="line"><span class="regexp">      width: 100px;</span></span><br><span class="line"><span class="regexp">      height: 100px;</span></span><br><span class="line"><span class="regexp">      background: green;</span></span><br><span class="line"><span class="regexp">      border-radius: 50%;</span></span><br><span class="line"><span class="regexp">      position: absolute;</span></span><br><span class="line"><span class="regexp">      top: 100px;</span></span><br><span class="line"><span class="regexp">      left: 0px;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>style&gt;</span><br><span class="line">  &lt;<span class="regexp">/head&gt;</span></span><br><span class="line"><span class="regexp">  &lt;body&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div class="ctrl"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button id="go"&gt;go&lt;/</span>button&gt;</span><br><span class="line">      &lt;button id=<span class="string">"back"</span>&gt;back&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div id=<span class="string">"box"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    &lt;script src=<span class="string">"./js/jquery.min.js"</span> charset=<span class="string">"utf-8"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">    &lt;script src=<span class="string">"./js/move.js"</span> charset=<span class="string">"utf-8"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">    &lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">    <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">"box"</span>);</span><br><span class="line">    <span class="keyword">var</span> timer;</span><br><span class="line"></span><br><span class="line">    $(<span class="string">'#go'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 向右移动</span></span><br><span class="line">      linearMove(box,<span class="number">1500</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $(<span class="string">"#back"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="comment">//向左移动</span></span><br><span class="line">      slowDownMove(box,<span class="number">0</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="scroll-滚动"><a href="#scroll-滚动" class="headerlink" title="scroll 滚动"></a>scroll 滚动</h3><p><img src="/franksunhd.github.io/images/scroll.png" alt=""></p>
<ul>
<li>通过<strong>父元素</strong>获取滚动大小</li>
<li>scrollTop 页面向上走被遮挡的部分</li>
<li>scrollLeft 页面向左走被遮挡的部分</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-id">#box</span> &#123;</span></span><br><span class="line"><span class="undefined">    width: 300px;</span></span><br><span class="line"><span class="undefined">    height: 300px;</span></span><br><span class="line"><span class="undefined">    border: 10px solid red;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    overflow: scroll;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-id">#inner</span> &#123;</span></span><br><span class="line"><span class="undefined">    width: 1000px;</span></span><br><span class="line"><span class="undefined">    height: 1000px;</span></span><br><span class="line"><span class="undefined">    background-color: green;</span></span><br><span class="line"><span class="undefined">    font-size: 50px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"inner"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--这的1000指的是子元素的滚动宽高--&gt;</span></span><br><span class="line">console.log(box.scrollWidth,box.scrollHeight);  // 1000 1000</span><br><span class="line">console.log(box.scrollTop,box.scrollLeft); // 0 0</span><br></pre></td></tr></table></figure>
<h3 id="scrollTop-scrollLeft"><a href="#scrollTop-scrollLeft" class="headerlink" title="scrollTop/scrollLeft"></a>scrollTop/scrollLeft</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getScrollTop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 获取:</span></span><br><span class="line">    <span class="comment">// 必有一个为 0,所以可以两个值相加</span></span><br><span class="line">   	<span class="keyword">return</span> <span class="built_in">document</span>.documentElement.scrollTop + <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">  <span class="comment">// 或者</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setScrollTop</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 设置</span></span><br><span class="line">  <span class="built_in">document</span>.body.scrollTop = <span class="built_in">document</span>.documentElement.scrollTop = value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="window-onscroll"><a href="#window-onscroll" class="headerlink" title="window.onscroll"></a>window.onscroll</h3><ul>
<li>监听窗口滚动</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听窗口滚动,页面滚东,或者第一次刷新,</span></span><br><span class="line"><span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(getScrollTop());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> value = getScrollTop();</span><br><span class="line">    <span class="keyword">var</span> useable = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (value &gt;= <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// 显示</span></span><br><span class="line">        goTop.style.display = <span class="string">"block"</span>;</span><br><span class="line">        useable = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 隐藏</span></span><br><span class="line">        goTop.style.display = <span class="string">"none"</span>;</span><br><span class="line">        useable = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="瀑布流布局"><a href="#瀑布流布局" class="headerlink" title="瀑布流布局"></a>瀑布流布局</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>瀑布流布局<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">media</span>=<span class="string">"screen"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">		* &#123;</span></span><br><span class="line"><span class="css">			<span class="selector-tag">margin</span><span class="selector-pseudo">:0px</span>;</span></span><br><span class="line"><span class="undefined">			padding: 0px;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">		ul li &#123;</span></span><br><span class="line"><span class="undefined">			list-style-type: none;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">		<span class="selector-id">#box</span> &#123;</span></span><br><span class="line"><span class="undefined">			overflow: hidden;</span></span><br><span class="line"><span class="undefined">			border: 5px solid blue;</span></span><br><span class="line"><span class="undefined">			margin-top: 200px;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">		<span class="selector-id">#box</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="undefined">			margin-left: 2%;</span></span><br><span class="line"><span class="css">			<span class="selector-tag">width</span>: 17<span class="selector-class">.6</span>%;</span></span><br><span class="line"><span class="undefined">			float: left;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">		<span class="selector-id">#box</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="undefined">			background-color: gray;</span></span><br><span class="line"><span class="undefined">			font-size: 30px;</span></span><br><span class="line"><span class="undefined">			text-align: center;</span></span><br><span class="line"><span class="css">			<span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">			margin-top: 5%;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> ulArr = <span class="built_in">document</span>.querySelectorAll(<span class="string">"#box ul"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 创建方法</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">createItem</span>(<span class="params">length</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> item = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span></span><br><span class="line"><span class="undefined">				item.innerText = i + 1;</span></span><br><span class="line"><span class="undefined">				item.style.backgroundColor = randomColor();</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">	            <span class="comment">// 随机高度</span></span></span><br><span class="line"><span class="javascript">	            <span class="keyword">var</span> h = randomNumber(<span class="number">100</span>,<span class="number">400</span>);</span></span><br><span class="line"><span class="javascript">				item.style.height = h + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="javascript">				item.style.lineHeight =  h + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">				<span class="comment">// ulArr[randomNumber(0,4)].appendChild(item);</span></span></span><br><span class="line"><span class="undefined">				ulArr[getMinIndex()].appendChild(item);</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">		createItem(50);</span></span><br><span class="line"><span class="javascript">		<span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 当显示到最短一列,再次加载100个</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 当滚动距离+可视窗口高度 == 最短列的高度 加载</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> value = getScrollTop() + clientHeight();</span></span><br><span class="line"><span class="javascript">			<span class="built_in">console</span>.log(value);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 获取最小一列下标</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> minIndex = getMinIndex(ulArr);</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 获取元素的最小高度</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> minHeight = ulArr[minIndex].offsetHeight;</span></span><br><span class="line"><span class="javascript">			<span class="comment">// 返回元素到页面顶部的距离</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> offTop = getOffsetTop(ulArr[minIndex]);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">			<span class="keyword">if</span> (value &gt;= (minHeight + offTop)) &#123;</span></span><br><span class="line"><span class="javascript">				<span class="comment">// console.log("时机到了",value,"--",minHeight);</span></span></span><br><span class="line"><span class="undefined">				createItem(50);</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="undefined">		&#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="comment">// 返回元素到页面顶部的距离</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">getOffsetTop</span>(<span class="params">ele</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">if</span> (ele.nodeName == <span class="string">"BODY"</span>) &#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">return</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> top = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="undefined">				top += ele.offsetTop + ele.offsetParent.clientTop;</span></span><br><span class="line"><span class="undefined">				ele = ele.offsetParent;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 如果是 body 停止</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span> (ele.offsetParent == <span class="literal">null</span>)<span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> top;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 获取页面的滚动距离</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">getScrollTop</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="comment">// return document.documentElement.scrollTop + document.body.scrollTop;</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 获取浏览器可视窗口的高度</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">clientHeight</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> <span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 找最小高度</span></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">getMinIndex</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="comment">// ulArr[0].offsetHeight</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> minIndex = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; ulArr.length; i++) &#123;</span></span><br><span class="line"><span class="undefined">				minIndex = ulArr[minIndex].offsetHeight &gt; ulArr[i].offsetHeight ? i : minIndex;</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> minIndex;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">randomColor</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> r = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random()*<span class="number">256</span>);</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> g = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random()*<span class="number">256</span>);</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> b = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random()*<span class="number">256</span>);</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> a = <span class="built_in">Math</span>.random();</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> <span class="string">"rgb("</span> + r + <span class="string">","</span> + g +  <span class="string">","</span>+ b +<span class="string">")"</span>;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 包含 a,b</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">randomNumber</span>(<span class="params">a, b</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> max = <span class="built_in">Math</span>.max(a, b);</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> min = <span class="built_in">Math</span>.min(a, b);</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>) + min);</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="图片瀑布流"><a href="#图片瀑布流" class="headerlink" title="图片瀑布流"></a>图片瀑布流</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>瀑布流图片<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">media</span>=<span class="string">"screen"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">		* &#123;</span></span><br><span class="line"><span class="css">			<span class="selector-tag">margin</span><span class="selector-pseudo">:0px</span>;</span></span><br><span class="line"><span class="undefined">			padding: 0px;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">		ul li &#123;</span></span><br><span class="line"><span class="undefined">			list-style-type: none;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">		<span class="selector-id">#box</span> &#123;</span></span><br><span class="line"><span class="undefined">			overflow: hidden;</span></span><br><span class="line"><span class="undefined">			border: 5px solid blue;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">		<span class="selector-id">#box</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="undefined">			margin-left: 2%;</span></span><br><span class="line"><span class="css">			<span class="selector-tag">width</span>: 17<span class="selector-class">.6</span>%;</span></span><br><span class="line"><span class="undefined">			float: left;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">		<span class="selector-id">#box</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="undefined">			background-color: gray;</span></span><br><span class="line"><span class="undefined">			font-size: 30px;</span></span><br><span class="line"><span class="undefined">			text-align: center;</span></span><br><span class="line"><span class="css">			<span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">			margin-top: 5%;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">		<span class="selector-id">#box</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="undefined">			width: 100%;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> ulArr = <span class="built_in">document</span>.querySelectorAll(<span class="string">"#box ul"</span>);</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> srcArr = [<span class="string">"./img/img2/P_000.jpg"</span>,<span class="string">"./img/img2/P_001.jpg"</span>,<span class="string">"./img/img2/P_002.jpg"</span>,<span class="string">"./img/img2/P_003.jpg"</span>,<span class="string">"./img/img2/P_004.jpg"</span>];</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 创建方法</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> i = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">createItem</span>(<span class="params">length</span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">			i++;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">if</span> (i &gt; length) &#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> item = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span></span><br><span class="line"><span class="undefined">			item.innerText = i;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span></span><br><span class="line"><span class="undefined">			img.src = srcArr[randomNumber(0,4)];</span></span><br><span class="line"><span class="undefined">			item.appendChild(img);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 预加载图片</span></span></span><br><span class="line"><span class="javascript">			img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">				ulArr[getMinIndex()].appendChild(item);</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 加载下一张</span></span></span><br><span class="line"><span class="undefined">                /*</span></span><br><span class="line"><span class="javascript">                	递归调用,必须要 <span class="keyword">return</span> 停止</span></span><br><span class="line"><span class="undefined">                	第一次执行到递归调用后,会停止在该位置,</span></span><br><span class="line"><span class="undefined">               	 	等待第二次执行结束,第二次等待第三次,</span></span><br><span class="line"><span class="javascript">                	直到最后一次函数被 <span class="keyword">return</span> 结束,</span></span><br><span class="line"><span class="undefined">                 	倒序 n次 10,9,8...2,1;结束函数</span></span><br><span class="line"><span class="undefined">                 */</span></span><br><span class="line"><span class="undefined">                createItem(length);</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">		createItem(50);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 当显示到最短一列,再次加载100个</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 当滚动距离+可视窗口高度 == 最短列的高度 加载</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> value = getScrollTop() + clientHeight();</span></span><br><span class="line"><span class="javascript">			<span class="built_in">console</span>.log(value);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 获取最小一列下标</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> minIndex = getMinIndex(ulArr);</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 获取元素的最小高度</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> minHeight = ulArr[minIndex].offsetHeight;</span></span><br><span class="line"><span class="javascript">			<span class="comment">// 返回元素到页面顶部的距离</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> offTop = getOffsetTop(ulArr[minIndex]);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">			<span class="keyword">if</span> (value &gt;= (minHeight + offTop)) &#123;</span></span><br><span class="line"><span class="javascript">				<span class="comment">// console.log("时机到了",value,"--",minHeight);</span></span></span><br><span class="line"><span class="javascript">				<span class="comment">// createItem(50);</span></span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="undefined">		&#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="comment">// 返回元素到页面顶部的距离</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">getOffsetTop</span>(<span class="params">ele</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">if</span> (ele.nodeName == <span class="string">"BODY"</span>) &#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">return</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> top = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="undefined">				top += ele.offsetTop + ele.offsetParent.clientTop;</span></span><br><span class="line"><span class="undefined">				ele = ele.offsetParent;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 如果是 body 停止</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span> (ele.offsetParent == <span class="literal">null</span>)<span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> top;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 获取页面的滚动距离</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">getScrollTop</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 获取:</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 必有一个为 0,所以可以两个值相加</span></span></span><br><span class="line"><span class="javascript">			<span class="comment">// return document.documentElement.scrollTop + document.body.scrollTop;</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 获取浏览器可视窗口的高度</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">clientHeight</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> <span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 找最小高度</span></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">getMinIndex</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="comment">// ulArr[0].offsetHeight</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> minIndex = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; ulArr.length; i++) &#123;</span></span><br><span class="line"><span class="undefined">				minIndex = ulArr[minIndex].offsetHeight &gt; ulArr[i].offsetHeight ? i : minIndex;</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> minIndex;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">randomColor</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> r = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random()*<span class="number">256</span>);</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> g = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random()*<span class="number">256</span>);</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> b = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random()*<span class="number">256</span>);</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> a = <span class="built_in">Math</span>.random();</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> <span class="string">"rgb("</span> + r + <span class="string">","</span> + g +  <span class="string">","</span>+ b +<span class="string">")"</span>;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 包含 a,b</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">randomNumber</span>(<span class="params">a, b</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> max = <span class="built_in">Math</span>.max(a, b);</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> min = <span class="built_in">Math</span>.min(a, b);</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>) + min);</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="图片预加载-onload"><a href="#图片预加载-onload" class="headerlink" title="图片预加载 onload"></a>图片预加载 onload</h2><ul>
<li>图片预加载:提前缓存网页中用到的图片,当使用图片时,可以立马显示并可以获取大小</li>
<li>缺点:第一次进入界面的时候会下载所有的图片,造成服务器的压力</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>图片的预加载<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">media</span>=<span class="string">"screen"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">		* &#123;</span></span><br><span class="line"><span class="undefined">			margin: 0px;</span></span><br><span class="line"><span class="undefined">			padding: 0px;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"pic"</span> <span class="attr">width</span>=<span class="string">"400"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> pic = <span class="built_in">document</span>.getElementById(<span class="string">'pic'</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="built_in">console</span>.log(<span class="string">"宽度:"</span>,pic.width,<span class="string">"高度:"</span>,pic.height);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="built_in">document</span>.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 预加载图片</span></span></span><br><span class="line"><span class="undefined">            /*</span></span><br><span class="line"><span class="undefined">             * 图片预加载:提前缓存网页中用到的图片,当使用图片时,可以立马显示并可以获取大小</span></span><br><span class="line"><span class="undefined">             *</span></span><br><span class="line"><span class="undefined">             * 缺点:第一次进入界面的时候会下载所有的图片,造成服务器的压力</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> obj = <span class="keyword">new</span> Image();</span></span><br><span class="line"><span class="javascript">			obj.src = <span class="string">"http://e.hiphotos.baidu.com/zhidao/pic/item/ac345982b2b7d0a2284d772bcdef76094a369afb.jpg"</span>;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// onload 方法</span></span></span><br><span class="line"><span class="javascript">			<span class="built_in">console</span>.log(obj);</span></span><br><span class="line"><span class="javascript">			obj.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 只有该方法回调,才能准确获取图片的大小,图片被浏览器缓存</span></span></span><br><span class="line"><span class="javascript">				<span class="built_in">console</span>.log(<span class="string">"图片加载完成"</span>);</span></span><br><span class="line"><span class="javascript">				<span class="built_in">console</span>.log(<span class="string">"load后(原图):"</span>,obj.height);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">				pic.src = obj.src;</span></span><br><span class="line"><span class="javascript">				<span class="built_in">console</span>.log(<span class="string">"缓存后:"</span>,pic.height);</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="javascript">			<span class="built_in">console</span>.log(<span class="string">"------------"</span>);</span></span><br><span class="line"><span class="javascript">			<span class="built_in">console</span>.log(<span class="string">"load前:"</span>,obj.height);</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* 功能封装</span></span><br><span class="line"><span class="comment"> * 功能: 图片预加载</span></span><br><span class="line"><span class="comment"> * 参数1:图片地址数组</span></span><br><span class="line"><span class="comment"> * 参数2:图片加载回调</span></span><br><span class="line"><span class="comment"> * 参数3:下载完成回调</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> Loading = &#123;</span><br><span class="line">	flag:<span class="number">0</span>,</span><br><span class="line">	prepareLoad:<span class="function"><span class="keyword">function</span>(<span class="params">imgArr,loadingCB,successCB</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">		imgArr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value,index</span>) </span>&#123;</span><br><span class="line">			<span class="comment">// console.log(value,index);</span></span><br><span class="line">            <span class="comment">// 每个地址都创建一个对象</span></span><br><span class="line">			<span class="keyword">var</span> obj = <span class="keyword">new</span> Image();</span><br><span class="line">            <span class="comment">// 下载</span></span><br><span class="line">            obj.src = value;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 监听下载的完成</span></span><br><span class="line">			obj.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="comment">// 加一下,代表下载完成一项</span></span><br><span class="line">				Loading.flag++;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">var</span> Ivalue = <span class="built_in">Math</span>.ceil((Loading.flag / imgArr.length) * <span class="number">100</span>);</span><br><span class="line">                <span class="comment">// 判断执行了数组的 length 次</span></span><br><span class="line">                <span class="comment">// index:无序,代表图片下载完成顺序和代码执行顺序无关</span></span><br><span class="line">                <span class="comment">// this:当前下载完成的图片</span></span><br><span class="line">				<span class="comment">// console.log(flag,"加载完了第",index,"张");</span></span><br><span class="line">				<span class="comment">// console.log(this);  // 谁下载完了就代表谁</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// 下载回调</span></span><br><span class="line">                <span class="keyword">typeof</span> loadingCB == <span class="string">"function"</span> &amp;&amp; loadingCB(Ivalue);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 判断执行的数组的 length次</span></span><br><span class="line">                <span class="keyword">if</span> (Loading.flag == imgArr.length) &#123;</span><br><span class="line">					<span class="keyword">typeof</span> successCB == <span class="string">"function"</span> &amp;&amp; successCB();</span><br><span class="line">                &#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Loading.load(["地址"],function(value)&#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;,function()&#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h2><ul>
<li>图片懒加载:大型网站,图片比较多的网站使用</li>
<li>优点:优化网站,是网页加载更加流畅</li>
<li>处理方式:</li>
<li>没有出现的图片, src 先给一个1像素的占位图,把真实的地址存储在其他属性中,监听网页的滚动,在图片即将出现的时候取出真实的地址赋给 src</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>图片的懒加载<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">media</span>=<span class="string">"screen"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">		* &#123;<span class="attribute">margin</span>: <span class="number">0</span>;<span class="attribute">padding</span>: <span class="number">0</span>;&#125;</span></span><br><span class="line"><span class="css">		<span class="selector-tag">li</span> &#123;<span class="attribute">list-style-type</span>: none;&#125;</span></span><br><span class="line"><span class="css">		<span class="selector-id">#box</span> &#123;<span class="attribute">width</span>: <span class="number">500px</span>;<span class="attribute">margin</span>: auto;&#125;</span></span><br><span class="line"><span class="css">		<span class="selector-id">#box</span> <span class="selector-tag">li</span> &#123;<span class="attribute">border</span>: <span class="number">5px</span> solid red;<span class="attribute">margin-bottom</span>: <span class="number">300px</span>;&#125;</span></span><br><span class="line"><span class="css">		<span class="selector-id">#box</span> <span class="selector-tag">li</span> <span class="selector-tag">img</span> &#123;<span class="attribute">width</span>: <span class="number">100%</span>;&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">lazy-src</span>=<span class="string">"./img2/P_000.jpg"</span> <span class="attr">src</span>=<span class="string">"http://static.youku.com/v1.0.166/index/img/sprite.gif"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">lazy-src</span>=<span class="string">"./img2/P_001.jpg"</span> <span class="attr">src</span>=<span class="string">"http://static.youku.com/v1.0.166/index/img/sprite.gif"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">lazy-src</span>=<span class="string">"./img2/P_002.jpg"</span> <span class="attr">src</span>=<span class="string">"http://static.youku.com/v1.0.166/index/img/sprite.gif"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">lazy-src</span>=<span class="string">"./img2/P_003.jpg"</span> <span class="attr">src</span>=<span class="string">"http://static.youku.com/v1.0.166/index/img/sprite.gif"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">lazy-src</span>=<span class="string">"./img2/P_004.jpg"</span> <span class="attr">src</span>=<span class="string">"http://static.youku.com/v1.0.166/index/img/sprite.gif"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> imgArr = [<span class="string">"./img2/P_000.jpg"</span>,<span class="string">"./img2/P_001.jpg"</span>,<span class="string">"./img2/P_002.jpg"</span>,<span class="string">"./img2/P_003.jpg"</span>,<span class="string">"./img2/P_004.jpg"</span>];</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> lis = <span class="built_in">document</span>.querySelectorAll(<span class="string">"#box li"</span>);</span></span><br><span class="line"><span class="javascript">		<span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 页面滚出去的距离</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> sTop = getScrollTop();</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 可视区的高度</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> cHeight = clientHeight();</span></span><br><span class="line"><span class="javascript">			<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 元素距离页面顶部的距离</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> offTop = getOffsetTop(lis[i]);</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 刚出现在可视区</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> imgObj = lis[i].children[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> src = imgObj.getAttribute(<span class="string">"lazy-src"</span>);</span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span> (sTop + cHeight &gt; offTop &amp;&amp; src) &#123;</span></span><br><span class="line"><span class="undefined">					imgObj.src = src;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 删除 lazy-src</span></span></span><br><span class="line"><span class="javascript">                    imgObj.removeAttribute(<span class="string">"lazy-src"</span>);</span></span><br><span class="line"><span class="undefined">		&#125;&#125;&#125;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 默认调用</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onscroll(); <span class="comment">// 前边的就会默认显示</span></span></span><br><span class="line"><span class="javascript">		<span class="comment">// 页面滚动的距离</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">getOffsetTop</span>(<span class="params">ele</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">if</span> (ele.nodeName == <span class="string">"BODY"</span>) &#123;<span class="keyword">return</span> <span class="number">0</span>;&#125;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> top = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="undefined">				top += ele.offsetTop + ele.offsetParent.clientTop;</span></span><br><span class="line"><span class="undefined">				ele = ele.offsetParent;</span></span><br><span class="line"><span class="javascript">				<span class="comment">// 如果是 body 停止</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span> (ele.offsetParent == <span class="literal">null</span>)<span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> top</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="javascript">		<span class="comment">// 获取滚动元素距离屏幕顶部的距离</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">getScrollTop</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 页面可视区高度</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">clientHeight</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> <span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    
    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束感谢您的阅读-------------</div>
    
</div>
      
    </div>
    <div>
    
    </div>
    <div>
    
    </div>
    <div>
    
    </div>
    <footer class="post-footer">

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/franksunhd.github.io/2019/01/14/js-senior/" rel="next" title="JavaScript 高级应用/函数绑定/柯里化/函数记忆/高阶函数/定时器节流/设计模式">
                <i class="fa fa-chevron-left"></i> JavaScript 高级应用/函数绑定/柯里化/函数记忆/高阶函数/定时器节流/设计模式
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/franksunhd.github.io/2019/01/14/js-bom/" rel="prev" title="BOM对象/浏览器对象/window对象方法及属性/Cookie">
                BOM对象/浏览器对象/window对象方法及属性/Cookie <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/franksunhd.github.io/images/avatar.png" alt="franksun">
            
              <p class="site-author-name" itemprop="name">franksun</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/franksunhd.github.io/archives/">
              
                  <span class="site-state-item-count">83</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/franksunhd.github.io/categories/index.html">
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/franksunhd.github.io/tags/index.html">
                  <span class="site-state-item-count">76</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/franksunhd" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#DOM-对象-节点"><span class="nav-number">1.</span> <span class="nav-text">DOM 对象/节点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#文档对象模型"><span class="nav-number">1.1.</span> <span class="nav-text">文档对象模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取样式"><span class="nav-number">1.2.</span> <span class="nav-text">获取样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#节点访问-父-兄-子"><span class="nav-number">1.3.</span> <span class="nav-text">节点访问(父/兄/子)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获得节点"><span class="nav-number">1.4.</span> <span class="nav-text">获得节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建节点"><span class="nav-number">1.5.</span> <span class="nav-text">创建节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#操作节点"><span class="nav-number">1.6.</span> <span class="nav-text">操作节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#节点属性相关"><span class="nav-number">1.7.</span> <span class="nav-text">节点属性相关</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#克隆节点"><span class="nav-number">1.8.</span> <span class="nav-text">克隆节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#处理文本节点"><span class="nav-number">1.9.</span> <span class="nav-text">处理文本节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#innerHTML遗留问题-效率问题"><span class="nav-number">1.10.</span> <span class="nav-text">innerHTML遗留问题/效率问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#client"><span class="nav-number">2.</span> <span class="nav-text">client</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#offset-元素外尺寸"><span class="nav-number">3.</span> <span class="nav-text">offset 元素外尺寸</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#offsetWidth-offsetHeight"><span class="nav-number">3.1.</span> <span class="nav-text">offsetWidth/offsetHeight</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#offsetParent-偏移父元素"><span class="nav-number">3.2.</span> <span class="nav-text">offsetParent 偏移父元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#offset-动画"><span class="nav-number">3.3.</span> <span class="nav-text">offset 动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scroll-滚动"><span class="nav-number">3.4.</span> <span class="nav-text">scroll 滚动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scrollTop-scrollLeft"><span class="nav-number">3.5.</span> <span class="nav-text">scrollTop/scrollLeft</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#window-onscroll"><span class="nav-number">3.6.</span> <span class="nav-text">window.onscroll</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#瀑布流布局"><span class="nav-number">4.</span> <span class="nav-text">瀑布流布局</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图片瀑布流"><span class="nav-number">5.</span> <span class="nav-text">图片瀑布流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图片预加载-onload"><span class="nav-number">6.</span> <span class="nav-text">图片预加载 onload</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图片懒加载"><span class="nav-number">7.</span> <span class="nav-text">图片懒加载</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">franksun</span>

  
</div>








  <div class="footer-custom">Hosted by <a target="_blank" href="javascript:;">GitHub Pages</a></div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/franksunhd.github.io/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/franksunhd.github.io/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/franksunhd.github.io/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/franksunhd.github.io/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/franksunhd.github.io/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/franksunhd.github.io/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/franksunhd.github.io/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/franksunhd.github.io/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/franksunhd.github.io/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/franksunhd.github.io/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/franksunhd.github.io/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/franksunhd.github.io/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/franksunhd.github.io/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
